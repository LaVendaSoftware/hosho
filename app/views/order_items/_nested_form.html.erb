<div id="<%= dom_id(form.object) %>" data-new-record="<%= form.object.new_record? %>" class="my-2 border-t nested-form-wrapper rounded-xl border bg-background shadow overflow-hidden nested-form-wrapper px-4 pt-4 mb-4">
  <%= form.hidden_field(:id) %>

  <%= render(Components::NestedField::Remove.new) %>

  <div class="grid grid-cols-2 gap-4 items-start" data-controller="product-variants">
    <%= render(Components::Form::Select.new(
          form,
          :quantity,
          collection: 0..10,
          data: {
            action: "change->product-variants#change",
            product_variants_target: "quantity"
          }
        )) %>
    <%= render(Components::Form::BelongsToField.new(
          form,
          :product_variant,
          collection: current_product_variants.pluck(:title, :id),
          data: {
            action: "change->product-variants#change",
            product_variants_target: "productVariantId"
          }
        )) %>
    <%= render(Components::Form::CurrencyField.new(
          form,
          :unit_price,
          readonly: true,
          data: {
            mask: "currency",
            product_variants_target: "unitPrice"
          }
        )) %>
    <%= render(Components::Form::CurrencyField.new(
          form,
          :subtotal,
          readonly: true,
          data: {
            mask: "currency",
            product_variants_target: "subtotal"
          }
        )) %>
  </div>
</div>
