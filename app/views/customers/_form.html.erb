<%= render(Components::PageTitle::Form.new(record: customer, back_url: customers_path)) %>

<div class="flex flex-col gap-4 p-4 md:gap-6 md:p-6">
  <%= form_for(customer) do |form| %>
    <%= form.fields_for(:user) do |f| %>
      <%= render("users/nested_form", form: f) %>
    <% end %>

    <div class="grid grid-cols-5 gap-4 items-start">
      <div class="col-span-2">
        <%= render(Components::Form::TextField.new(form, :document, data: {mask: "cpf"})) %>
      </div>

      <%= render(Components::Form::Select.new(form, :country_code, collection: Addresses::Countries.dialing_code_options)) %>

      <div class="col-span-2">
        <%= render(Components::Form::TextField.new(form, :phone)) %>
      </div>
    </div>

    <%= render(Components::Subtitle.new(tm(Address))) %>
    <%= form.fields_for(:address) do |f| %>
      <%= render("addresses/nested_form", form: f) %>
    <% end %>

    <div>
      <%= render(Components::Form::SubmitButton.new(form, label: "Salvar cliente")) %>
      <%= render(Components::Form::SubmitButton.new(form, name: "commit_and_new_order",variant: :outline, label: "Salvar cliente e criar pedido")) %>
    </div>
  <% end %>
</div>
